const ce=()=>B?s([le,ue,pe,ae,he]):["NUMISMATIC","DECO"].includes(W)?le:"ECHO"===W?ue:"DIGITAL"===W?pe:"LINE"===W?ae:"DENOMINATION"===W?Ce:R?he:i;function ie(){se(0,0,90,0,Ie({fillC:ROSETTE_FILL_C,strokeMod:6}))}function le(t,e,o=200,n=100,r={},s=window){s.push(),r.strokeC&&s.stroke(r.strokeC),r.fillC&&s.fill(r.fillC);const c=r.strokeMod||1,i=r.points,l=Ee(t,e,i,r.c1,r.c2,r.r1,r.r2);for(let t=0;t<6;t++)s.strokeWeight(((r.strokeW||.7)+o/150-1)*c*ut),u(i,e=>{const[n,r]=l(o,e,t/3),[s,c]=l(.95*o,e,t/3);return e%2==0?[s,c]:[n,r]},s);let f=o,a=.75*o,p=0;for(;a>=n&&p<20;){s.strokeWeight(((r.strokeW||1)+f/150-1)*ut);for(let t=0;t<6;t++)u(i,e=>{const[o,n]=l(f,e,t/3),[r,s]=l(a,e,t/3);return e%2==0?[r,s]:[o,n]},s);(f=1.045*a)<10?a=0:a-.75*a<10?a=f-10:a*=.75,p++}s.pop()}function fe(t,e,o,n,r){"NUMISMATIC"===W&&le(t,e,o,n,{...r,strokeMod:10}),ue(t,e,o,n,r,!0)}function ue(t=0,e=0,o=200,n=100,r={},s=!1){push(),r.strokeC&&stroke(r.strokeC),s&&strokeWeight(2),r.strokeW&&strokeWeight(r.strokeW);const c=Ee(t,e,r.points,r.c1,r.c2,r.r1,r.r2),i=r.rDiff||(s?1:5);for(let t=n;t<=o;t+=i)!s&&!r.ignoreShrink&&strokeWeight(t*r.strokeW/130),r.innerC&&r.outterC&&stroke(lerpColor(r.innerC,r.outterC,(t-n)/(o-n))),l(r.points,e=>Je(c(t,e)));pop()}function ae(t=0,e=0,o=200,n=100,r={}){push(),r.strokeC&&stroke(r.strokeC),r.strokeW&&strokeWeight(r.strokeW);const s=r.points/2,c=Ee(t,e,s,r.c1,r.c2,r.r1,r.r2);for(let t=0;t<s;t+=.2){const[e,r]=Je(c(o,t)),[s,i]=Je(c(n,t));line(s,i,e,r)}pop()}function pe(t=0,e=0,o=200,n=100,r={}){ae(t,e,o,n,r),ue(t,e,o,n,r)}function he(t=0,e=0,o=90,n=0,r={}){push(),r.strokeC&&stroke(r.strokeC),r.fillC&&fill(r.fillC),r.strokeW&&strokeWeight(r.strokeW);const s=o/r.r1,c=o/r.r2,i=r.points,l=i/r.c1,a=i/r.c2;u(i,n=>{const r=n/i*TWO_PI,u=n/l*TWO_PI,p=n/a*TWO_PI,h=f(r,o,t,e),[C,T]=f(u,s,h[0],h[1]);return f(p,c,C,T)}),pop()}const Ce=(t=0,e=0,o=200,n=0,r={})=>{push(),r.strokeC&&stroke(r.strokeC),r.strokeW&&strokeWeight(r.strokeW);const s=r.points,c=Ee(t,e,s,r.c1,r.c2,r.r1,r.r2);for(let t=0;t<s;t+=.5){const[e,n]=c(o,t);Eo(d,e,n,.1,ROSETTE_STROKE_C)}pop()},Te=t=>R?ke(t):Ie(t),ke=t=>({c1:int(e(1,13))*r(),c2:int(e(170,192))*r(),r1:m?e(1,4):9,r2:m?e(6,12):5,strokeC:ROSETTE_STROKE_C,points:360,...t}),Ie=t=>({c1:int(e(1,m?25:16))*r(),c2:int(e(1,m?40:13))*r(),r1:m?e(4,10):e(10,20),r2:m?e(4,10):e(10,20),points:70,...t}),Ee=(t,e,o,n,r,s,c)=>{const i=o/n,l=o/r;return(n,r,u=0,a=null,p=null)=>{const h=(r+u)/o,C=(r+u)/i,T=(r+u)/l,k=a||1/s,I=p||1/c,E=1-k-I,[_,S]=f(h*TWO_PI,n*E,t,e),[g,O]=f(C*TWO_PI,n*k,_,S);return f(T*TWO_PI,n*I,g,O)}};function _e(){switch(H){case 0:He();break;case 1:we();break;case 2:Re();break;case 3:Me();break;case 4:Le();break;case 5:Ae();break;case 6:Ne();break;case 7:Pe();break;case 8:We()}}function Se(){const t=e();return n(IS_CRYPTO?.125:.01)?0:t<.125?1:t<.25?2:t<.375?3:t<.5?4:t<.625?5:t<.75?6:t<.875?7:8}function ge(){push(),noFill(),strokeWeight(e(.1,.5));for(let t=0;t<40;t++){stroke(L?I:n(.75)?h:_);const t=e(-at/2,at/2),o=e(-pt/2,pt/2),r=t+e(-25,25),s=r+e(-25,25),c=s+e(-25,25),i=o+e(-25,25),l=i+e(-25,25),f=l+e(-25,25);beginShape(),curveVertex(t+e(-20,20),o+e(-20,20)),curveVertex(t,o),curveVertex(r,i),curveVertex(s,l),curveVertex(c,f),endShape()}pop()}function Oe(){push();for(let t=-at/2;t<at/2;t+=5)for(let o=-pt/2;o<pt/2;o+=5)strokeWeight(e(1,2)),stroke(color(O,26,25,e(0,40))),point(t+e(-5,5),o+e(-5,5));pop()}function de(){push();for(let t=-at/2;t<at/2;t+=5)for(let e=-pt/2;e<pt/2;e+=5)strokeWeight(1),stroke(g),point(t+2,e+2);pop()}function We(){push(),strokeWeight(1);for(let t=-at/2;t<at/2;t+=20)for(let o=-pt/2;o<pt/2;o+=20){const r=e(.01,.15),s=n(.3),c=s?0:e(-10,10),i=s?0:e(-10,10);Io(Co(),t+c+10,o+i+10,r,h)}pop()}function Re(){push(),stroke(h),strokeWeight(.5);for(let t=-at/2;t<at/2;t+=10)for(let e=-pt/2;e<pt/2;e+=10)n(.5)?line(t,e,t+10,e+10):line(t+10,e,t,e+10);pop()}function Me(){push(),noFill(),strokeWeight(.5);const t=N||n(.5);for(let e=0,o=0;e<=pt+5;e+=15,o++){const n=e-pt/2;beginShape(),curveVertex(-30-at/2,n-7.5);for(let e=0;e<at/30+2;e++){const r=o%2==0?e%2==0?7.5:-7.5:e%2==0?-7.5:7.5;curveVertex(30*e-at/2,n+r),t&&(fill(I),circle(30*e-at/2,n+r,4),noFill())}endShape()}pop()}function Le(){push(),noFill(),strokeWeight(.5);for(let t=0;t<at;t+=100)for(let e=0;e<pt;e+=100)if(e/100%2==0&&t/100%2==0||e/100%2==1&&t/100%2==1)for(let o=0;o<100;o+=4)line(t-at/2,o+e+2-pt/2,t+100-at/2,o+e+2-pt/2);else for(let o=0;o<100;o+=4)line(o+t+2-at/2,e-pt/2,o+t+2-at/2,e+100-pt/2);pop()}function Ae(){push(),noFill(),strokeWeight(.5);for(let t=-5;t<pt+8;t+=pt/100){const e=t-pt/2;beginShape(),curveVertex(-30-at/2,e-7.5);for(let t=0;t<at/30+2;t++)curveVertex(30*t-at/2,e+(t%2==0?7.5:-7.5));endShape()}pop()}function Ne(){push(),strokeWeight(.35),N&&fill(LIGHT_ACCENT_C),stroke(C);for(let t=0;t<at;t+=10)for(let o=0;o<pt;o+=10){const r=t-at/2,s=o-pt/2;if(n(.5)){line(r,s,r+10,s+10);const t=e();t<.15?circle(r,s,4):t<.3&&circle(r+10,s+10,4)}else{line(r+20,s,r,s+20);const t=e();t<.15?circle(r+20,s,4):t<.3&&circle(r,s+20,4)}}pop()}function Pe(){push(),strokeWeight(1),stroke(C);for(let t=-at/2-pt/2;t<pt/2+at/2;t+=5)line(t,-pt/2,pt/2+t,0),line(pt/2+t,0,t,pt/2);pop()}function we(){push(),strokeWeight(.35),stroke(C);for(let t=-at/2;t<at/2+1;t+=10)for(let e=-pt/2;e<pt/2+1;e+=10)circle(t,e,14);pop()}function He(){push();const t=int(e(2,5));for(let o=0;o<at;o+=t)for(let n=0;n<pt;n+=t)fill(lerpColor(T,h,e(.75))),noStroke(),rect(at/2-o-t,pt/2-n-t,t,t);pop()}function Fe(t=[2,4]){push();const o=R?le:ce(),n=Ie({strokeC:h,strokeW:.35}),r=e(0,at/4);t.forEach(t=>o(_t[t][0],_t[t][1],at/2,r,n)),pop()}function be(){se(0,0,at,0)}function ve(t,e,o=200){push(),strokeWeight(2),fill(T),arc(t,e,.9*o,o,0,TWO_PI),noFill(),Io("$",t-.17*o,e-.125*o,.125,h),Io("$",t+.17*o,e-.125*o,.125,h),circle(t-.17*o,e-.125*o,.1*o),circle(t+.17*o,e-.125*o,.1*o),arc(t,e,.6*o,.7*o,TWO_PI+.15*PI,.85*PI),pop()}function xe(t,o,n,r=1){push(),scale(r),n&&stroke(n);const s=e();s<.3333?Ve(t,o):s<.85?De(t,o):Ge(t,o),pop()}function Ve(t=0,e=0,o=100){const n=1080/s([22,32,32.5,33,34,64,65,66,66.4]);l(1080,r=>{const s=r/1080*TWO_PI,[c,i]=f(s,o/100+abs(75*sin(33*s)),t,e);return f(r/n*TWO_PI,o,c,i)})}function De(t=0,e=0,o=100){const n=32*s([7,13,29,31,32,34,35,36,37,44,46,58,59,60,62,85,88,92,96]),r=5*o/6,c=4*o/6;l(n,o=>{const s=o/n*TWO_PI,[i,l]=f(s,r+abs(30*sin(90*s)),t,e);return f(o/32*TWO_PI,.8*c+abs(sin(360*s)),i,l)})}function Ge(t,e,o=100){r();const n=s([[10,96,2],[10,96,-4],[14,96,2],[15,29,-5],[720,-5,5],[720,6,-3],[720,-4,2],[720,-6,2],[720,-3,3],[720,-15,5],[50,-9,10]]),c=TWO_PI/n[0],i=.4*o,u=TWO_PI/n[1],a=.2*o,p=TWO_PI/n[2];l(720,n=>{const[r,s]=f(n*c,o,t,e),[l,h]=f(n*u,i,r,s);return f(n*p,a,l,h)})}function Ye(t=0,o=0,r,s=h){push();const c=N?I:T,i=n(.4275),l=e(),f=!i&&n(.5),u=!i&&n(.5),a=!i&&!f&&!u&&n(.5),p=l<.85,C=l>=.85,k=n(.9),E=n(.65),_=n(.65),S=n(.65),g=n(.65),O=n(.65)||!(E||_||S||g),d=!E&&!S&&!O,W=5*r/250,R={tC:f,bC:u,e:i,iE:a,t:p,iT:C,p:k};E&&Ke(t,o,r,s,9*W,R),_&&Ke(t,o,r,d?s:c,7*W,R),S&&Ke(t,o,r,s,5*W,R),g&&Ke(t,o,r,d?s:c,3*W,R),O&&Ke(t,o,r,s,W,R),pop()}function Ke(t,e,o,n,r,{tC:s=!1,bC:c=!1,e:i=!1,iE:l=!1,t:f=!1,iT:u=!1,p:a=!1}){noFill(),strokeWeight(r),stroke(n),f&&me(t,e,o,1),u&&me(t,e,o,-1),i&&Ue(t,e,o,130),l&&Ue(t,e,o,230),a&&point(t,e,0),s&&Xe(t,e,o,1),c&&Xe(t,e,o,0)}function Xe(t,e,o,n=1){const{centerW:r}=je(o),s=r/sin(radians(65)),c=cos(radians((1===n?235:124)/2))*(r/2);circle(t,e+c,s)}function je(t){const e=sin(radians(60))*t,o=tan(radians(30))*t/2;return{tHeight:e,heightOfCenter:o,centerW:tan(radians(30))*(e-o)*2}}function Ue(t,e,o,n,r=1){const{centerW:s}=je(o),c=s*r/sin(radians(n/2)),i=cos(radians(n/2))*(c/2);arc(t,e+i,c,c,radians(270-n/2),radians(270+n/2),OPEN),arc(t,e-i,c,c,radians(90-n/2),radians(90+n/2),OPEN)}function me(t,e,o,n=1){const{tHeight:r,heightOfCenter:s}=je(o);triangle(t-o/2,e+s*n,t+o/2,e+s*n,t,e+(r-s)*-n)}function ye(t,o,r,s){if(it)return;push(),noFill(),strokeWeight(1.5);let c=t-8*r,i=o+r/2;const l=[[c-e(r),i-e(r)],[c,i]];a(8,()=>{const t=n(.75),o=c+r*(1+.1*(t?-7:7))/2,s=i+(t?n(.85)?r*e(0,.3):r*e(1,1.5):-1*(n(.5)?r*e(0,.3):r*e(1,1.5))),f=c+r*e(.9,1.1),u=i+r*e(-.1,.1);l.push([o,s]),l.push([f,u]),c=f,i=u}),l.push([c+e(r),i+e(r)]),s?stroke(h):stroke(T),beginShape(),l.forEach(([t,e])=>curveVertex(t+1,e+1)),endShape(),s?stroke(_):stroke(h),beginShape(),l.forEach(([t,e])=>curveVertex(t,e)),endShape(),pop()}let Be=t=>{let o=e()+"";return o[2]!==t?o[2]:Be(t)},$e=(t=2)=>e().toFixed(3).slice(2,2+t);function qe(){let t="";const e=e=>a(e,()=>t+=$e());if(0===ct)e(2),t+=t;else if(1===ct)e(2),t+=t.split("").reverse().join("");else if(2===ct)e(4),t=t.split("").sort().join("");else if(3===ct)e(4),t=t.split("").sort().reverse().join("");else if(4===ct)t="00000"+$e(3);else if(5===ct)t="99999"+$e(3);else if(6===ct){const e=Be("0");a(8,()=>t+=s(["0",e]))}else e(4);return t}function Qe(t,e){if(it)return;push();const o=qe();fill(T),stroke(h),rect(t,e,x?72:60,20),Io(o,t+30,e+10,.125,h,_),x&&(fill(_),stroke(_),u(10,o=>f(o*TWO_PI/10,o%2==0?2.5:6,t+63,e+10))),pop()}const ze=n(.5);function Je([t,o],n=window){return y?(n.rotate(.1),[t+(ze?0:e(-10,10)),o+(ze?0:e(-10,10))]):[t,o]}const Ze=20;function to(t){push(),strokeWeight(2);const e=n(.3),o=Ze/2;for(let n=0;n<pt;n++)stroke(lerpColor(color(hue(_),saturation(_),lightness(_),50),color(hue(E),saturation(E),lightness(E),50),n/pt)),e&&int(n/50)%3==0?i():line(t-o,n+It,t+o,n+It);pop()}function eo(){const t=e();if(t<.02)return ao();const o=R?.5:.25;no(()=>{if(t<o){const t=e(),o=r()*(t<.75?2:3),s=co({degAdj:o}),c=8+s.radius;io(c,s),n(.25)&&io(c,co({degAdj:-1*o}))}else t<.55?po(60):t<.8?uo(-10,n(.7)):t<.85?ro(10,int(e(20,200))):t<.9?so(20):fo(20,int(e(1,7)),r())})}const oo=(t,e,o)=>{const n=int(e*ht/(2*(ht+1))),r=int(e/2-n),s=(at-2*o)/n,c=(pt-2*o)/r,i=-pt/2+o,l=pt/2-o,f=-at/2+o,u=at/2-o,a=n+r,p=2*n+r,h=2*n+2*r;return t<n?[f+t*s,i]:t<a?[u,i+(t-n)*c]:t<p?[u-(t-a)*s,l]:t<h?[f,l-(t-p)*c]:[f+(t-h)*s,i]};function no(t){push(),gt.translate(at/2,pt/2),gt.noFill(),gt.stroke(h),t(),image(gt,-at/2,-pt/2),pop()}function ro(t,e){for(let o=0;o<2;o+=.5)u(e,n=>{const[r,s]=oo(n+o,e,t),[c,i]=oo(n+o,e,t+20);return n%2==0?[c,i]:[r,s]},gt)}function so(t=10){gt.strokeWeight(1*ut);const e=2*(at-2*t+(pt-2*t))/3;a(e,o=>{const[n,r]=oo(o,e,t+3);gt.circle(n,r,6)}),u(e,o=>oo(o,e,t),gt),u(e,o=>oo(o,e,t+6),gt)}function co(t){const o=e(15,31),n=2===abs(t.degAdj)?e(3,26):e(1,13);return{radius:o,degAdj:t.degAdj,offsetAmt:n}}function io(t,e){const o=e.radius,n=e.degAdj,r=1/e.offsetAmt;gt.strokeWeight(.6*ut);for(let e=0;e<2;e+=r)u(67,r=>{const[s,c]=oo(r+e,66,t);return f((r+e)/n*TWO_PI,o,s,c)},gt)}function lo(t,e,o,n=1){const[r,s]=oo(t,e,o);return f(t/5*n*TWO_PI,5,r,s)}function fo(t=20,e=4,o=1){const n=50*e;if(M&&(gt.fill(ROSETTE_FILL_C),gt.stroke(ROSETTE_STROKE_C)),["NUMISMATIC","VINTAGE","DECO"].includes(W))for(let e=0;e<2;e+=.3333)u(n,r=>{const[s,c]=lo(r+e,n,t,o),[i,l]=lo(r+e,n,t+22,o);return r%2==0?[i,l]:[s,c]},gt);if(["ECHO","DIGITAL"].includes(W))for(let e=0;e<25;e+=5)u(n,o=>lo(o,n,t+e),gt,o);if(["LINE","DIGITAL"].includes(W))for(let e=0;e<n;e+=.2){const[r,s]=lo(e,n,t,o),[c,i]=lo(e,n,t+22,o);gt.line(r,s,c,i)}if(M){const e=e=>u(n,r=>lo(r,n,t+e,o),gt);e(19),gt.erase(),e(20),gt.noErase()}}function uo(t=-10,o=!0){const n=int(e(1,7));N?(gt.push(),a(100,t=>{gt.stroke(lerpColor(ROSETTE_STROKE_C,ROSETTE_FILL_C,(t+75)/150)),gt.rectMode(CENTER),gt.rect(0,0,at-t,pt-t)}),gt.pop()):gt.background(ROSETTE_FILL_C),gt.stroke(ROSETTE_STROKE_C),gt.strokeWeight(1.1*ut-n/12);const s=r(),c=M?5:0,i=["ECHO","DIGITAL"].includes(W)?6:0;fo(t+2+c,n,s),fo(t+19+i+c,n,s),fo(t+36+2*i+c,n,s);const l=t+(o?35:55);gt.stroke(h),gt.erase(),gt.fill(0),o?gt.rect(l-at/2,l-pt/2,at-2*l,pt-2*l):gt.rect(-at/2,l-pt/2,at,pt-2*l),gt.noErase(),gt.noFill(),o?(gt.rect(l-at/2,l-pt/2,at-2*l,pt-2*l),so(l+5)):gt.rect(-at/2,l-pt/2,at,pt-2*l)}function ao(t=10){const e=Co();a(80,o=>{const[n,r]=oo(o,80,t);Eo(e,n,r,.1,h)})}function po(t){const o=-pt/2,n=pt/2,r=-at/2,s=at/2,c=t/1.5,i=e(1,5),l=int(e(4,11));gt.stroke(h);for(let e=0;e<l;e++)e%2==0&&e!==l-1||gt.erase(),gt.fill(h),gt.strokeWeight(t*ut-e*i),gt.line(r,o,s,o),gt.line(s,o,s,n),gt.line(s,n,r,n),gt.line(r,n,r,o),gt.circle(r+c,o+c,c),gt.circle(r+c,n-c,c),gt.circle(s-c,o+c,c),gt.circle(s-c,n-c,c),e%2==0&&e!==l-1||gt.noErase()}const ho={1:"I",2:"II",5:"V",10:"X",20:"XX",50:"L",100:"C"};function Co(){const t=e();return!d||Ot&&t<.1?"$":P&&(!dt||t<.5)?(dt=!0,ho[d]):(Ot=!0,d)}function To(t,e,o,n,r,s){push(),translate(e-25*n,o+40*n),scale(n),stroke(r),fill(s||r);let c=!1;beginShape(),Oo[t].forEach((t,e)=>{"M"===t[0]?(c&&endContour(),0!==e&&(beginContour(),c=!0),vertex(t[1],t[2])):t.length>2?quadraticVertex(t[2],t[3],t[0],t[1]):vertex(t[0],t[1])}),c&&endContour(),endShape(),pop()}const ko={V:-14,C:-14,X:-12,XX:-11.5,L:-5.5,I:5.5,II:3.5,$:-3,4:-3,6:-3};function Io(t,e,o,n,r,s){if(!t)return;const c=floor(t.length/2);for(let i=0;i<t.length;i++){const l=i-c,f=50*n*("XX"===t?1.4:1),u=(ko[t]||0)*n,a=f*l+(t.length%2==0?f/2:0);To(t[i],e+a+u,o-3*n,n,r,s)}}function Eo(...t){["10","20","50","II"].includes(t[0])&&(t[3]=.75*t[3]),"XX"===t[0]&&(t[3]=.65*t[3]),"100"===t[0]&&(t[3]=.65*t[3]),Io(...t)}const _o=(...t)=>Eo(Co(),...t);function So(t,e,o,n,r){const s=Co();Io(s,t+1,e+1,o,n),Io(s,t-1,e-1,o,n),Io(s,t-1,e+1,o,n),Io(s,t+1,e-1,o,n),Io(s,t,e,o,r)}function go(t,e,o){const n=Co();Eo(n,t+2,e+2,o,h),Eo(n,t,e,o,L?h:T,L?T:N?E:h)};
