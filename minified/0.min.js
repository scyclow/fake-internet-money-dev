let t,e,n,o,r,s,i,c,l,f,u,a,h,p,C,T,E,k,I,_,O,S,d,g,W,M,R,L,A,N,P,w,b,H,F,v,V,x,D,G,K,Y,X,j,U,m;const y=700,B=400,$=y/B,q=4,Q=-y/2,z=y/2,J=-B/2,Z=B/2,tt={1:[Q,J],2:[z,J],3:[Q,Z],4:[z,Z]};let et,nt,ot=!1,rt=!1;function setup(){const e=window.innerWidth/window.innerHeight;$<e?(et=createCanvas(window.innerHeight*$,window.innerHeight),t=window.innerHeight/B):$>e?(et=createCanvas(window.innerWidth,window.innerWidth/$),t=window.innerWidth/y):(et=createCanvas(window.innerWidth,window.innerHeight),t=window.innerWidth/y),nt=createGraphics(y*q,B*q),noLoop(),colorMode(HSB,360,100,100,100),st()}function st(){const t=nn(0);t<.5?u="1":t<.75?u="5":t<7/8?u="10":t<.9375?u="20":t<31/32?u="50":t<63/64?u="100":t<127/128&&(u="2"),k=on(.2);const l=nn(1);if(COLOR_SCHEME=l<.65?"FIAT":l<.9?"CRYPTO":"BULLION",C="BULLION"===COLOR_SCHEME,IS_CRYPTO="CRYPTO"===COLOR_SCHEME,"FIAT"===COLOR_SCHEME)f=int(en(0,360)),e=color(f,26,25),o=color(cn(f-72),6,91),r=color(cn(max(f-72,0)),6,91),n=color(f,16,55),c=color(cn(f-145),80,64),LIGHT_ACCENT_C=color(cn(f-145),55,64,30),s=color(max(f-10,0),80,54),i=s,P=on(.02);else if("CRYPTO"===COLOR_SCHEME){const t=(f=int(en(0,360)))<275&&f>210;o=color(cn(f-133),96,t?0:15),e=color(f,t?80:99,t?95:90),n=color(f,69,75),c=color(cn(f-254),100,100),LIGHT_ACCENT_C=c,i=s=c,r=o}else f=int(en(0,360)),e=color(f,26,25),l<.96875?(o=color(203,5,48),s=color(167,5,95),e=color(40,26,20),n=color(203,10,35),i=n,U=!0):(o=color(40,60,67),s=color(60,30,100),e=color(35,45,30),n=color(35,45,35),i=color(203,10,25)),c=e,LIGHT_ACCENT_C=n,r=o,E=!0;m=nn(2)<.8125?"MAIN":nn(2)<.95?"STRIP":"GRID",T="MAIN"===m,K=on(.01)&&T&&!N,MAIN_CENTER_PIECE=ht(nn(3)),O=T&&nn(4)<.75,S=T&&on(O?.9:.6);const G=nn(5);G<.0625?(a="DECO",p=!0):G<.6?a="NUMISMATIC":G<.8?(a="VINTAGE",h=!0):a=G<.86?"ECHO":G<.96?"DIGITAL":G<.9825?"LINE":"DENOMINATION",w=on(.03125),g=[0,1,3].includes(MAIN_CENTER_PIECE)&&"WM2"!==I&&nn(7)<.25,W=g&&on(.4),M=g&&!W&&on(.2),R=g&&nn(7)<.0625,L=R&&on(.4),A=R&&!L&&on(.2);const y=on(.5)||C,B=U?s:r,$=!E||p||h||C?e:i;ROSETTE_FILL_C=h||y?B:$,ROSETTE_STROKE_C=h||y?$:B,E=!h&&on(.125);const q=nn(6);!T||O||q<.1875?(I="STANDARD",_=te()):I=q<.5?"WM2":q<.8125?"WM1":h||p?on(.5)?"WM1":"WM2":q<.9375||IS_CRYPTO?"FULL":"EMPTY",N=!S&&8!==_&&!W&&!L,serialSeed=en(),X=serialSeed<.005?0:serialSeed<.01?1:serialSeed<.015?2:serialSeed<.02?3:serialSeed<.025?4:serialSeed<.03?5:serialSeed<.035?6:"",d=nn(8)<.02,b=on(.02),K=K&&!N,F=on(.015),x=on(.015),H=on(.015),V=on(.01),D=on(.005),MISPRINT_HEAVY_INK=on(.005),v=on(.005),IS_MISPRINT=P||w||b||K||F||x||H||V||D||MISPRINT_HEAVY_INK||v,j=!X&&!d&&on(.1),Y=b||H||w}function it(){push();const t=rn(),n=en(0,100);C||strokeWeight(2);for(let r=-n;r<=y+n;r++){const i=1===t?r-y/2:y/2-r;stroke(lerpColor(o,P||C||E?s:e,P||C||IS_CRYPTO&&E?r/y:r/(5*y))),line(i+n,-B/2,i,B/2)}pop(),"FIAT"===COLOR_SCHEME&&ne(),"CRYPTO"!==COLOR_SCHEME&&ee()}function draw(){translate(width/2,height/2),scale(t),noFill(),stroke(e),it(),F&&lt(),x&&ct(),MISPRINT_HEAVY_INK&&strokeWeight(8),T||D?at():"STRIP"===m?Ht():bt(),V&&ft(),v&&ut();const n=(u||0)*(j?-1:1)*(IS_MISPRINT?0:1)*(IS_CRYPTO?on(.5)?en(0,150):en(0,1):1)*(U?50:1)*(C&&!U?100:1)*(d?3:1)*(X?5:1)*(h||p?1.5:1);try{console.log("Estimated Market Value: "+n),document.body.style.backgroundColor=e.toString()}catch(t){}}function keyPressed(){83===keyCode&&saveCanvas(et,"FIM-"+Date.now(),"jpg")}function ct(){translate(-1)}function lt(){translate(en(y/4,B/4)*rn(),en(y/4,B/4)*rn()),rotate(en(HALF_PI,-HALF_PI))}function ft(){push(),fill(o),strokeWeight(0),beginShape(),vertex(en(-y/2,y/2),-B/2),vertex(en(-y/2,y/2),B/2),vertex(en(-y/2,y/2),-B/2),endShape(),pop()}function ut(){strokeWeight(0);for(let t=0;t<=y;t++)for(let e=0;e<=B;e++)fill(0,0,100,en(0,60)),rect(t-y/2,e-B/2,2)}function at(){const t=S||Y?pt():[];let e=[],o=!1;if("STANDARD"===I)Zt();else if("WM2"===I)he(e=St(t));else if("WM1"===I){const o=Ot(t);e=[o];const r=175*kt(o),s=80*It(o,4===t.length),i=E?LIGHT_ACCENT_C:n;on(.8)?Te(r,s,i):_e(r+15,s,245,i)}else"FULL"===I&&(pe(),o=!0);switch(O&&He(),Ct(t),MAIN_CENTER_PIECE){case 0:break;case 1:At();break;case 2:Nt();break;case 3:Wt();break;case 4:Pt()}const r=rn();g&&(W?Rt(r):M?be(205*r):Mt(r)),R&&(L?Rt(-1*r):A?be(-205*r):Mt(-1*r)),D&&Dt(),dt(e.length||4===t.length?e:t,o)}function ht(t){if(T)return K?0:t<.6875?1:t<.8125?2:t<.9375?3:4}function pt(){const t=en();return t<.25?[1,2,3,4]:t<.5?[1,4]:t<.75?[2,3]:t<.825?[1,2]:t<.9375?[3,4]:[int(en(1,5))]}function Ct(t=[]){const e=on(.125),n=4===t.length&&on(.5)?[sn([1,3]),sn([2,4])]:[],o=qt(Lt());t.forEach(t=>{const[r,s]=tt[t],i=r+(t%2==1?57:-57),c=s+(t<3?57:-57),l=e||n.includes(t)?41.25:0;Gt(i,c,55,0,{...o,holeR:l}),Je(i,c,.35,ROSETTE_FILL_C,ROSETTE_STROKE_C)})}const Tt=t=>[1,2,3,4].filter(e=>!t.includes(e)),Et=t=>({1:4,2:3,3:2,4:1})[t],kt=t=>t%2!=0?-1:1,It=(t,e)=>e?0:t<3?-1:1,_t=(t,e)=>t.every((t,n)=>t===e[n])&&t.length===e.length,Ot=t=>4!==t.length&&t.length?1===t.length?Et(t[0]):sn(Tt(t)):sn([1,2,3,4]);function St(t){return 4!==t.length&&t.length?_t(t,[1,4])||_t(t,[2,3])?sn([[1,4],[2,3]]):1===t.length?Tt([t[0],Et(t[0])]):[Et(t[0]),Et(t[1])]:sn([[1,4],[2,3],[1,2],[3,4]])}function dt(t=[],e=!1){const n=115+(O?0:30),o=1===t.length?Et(t[0]):sn(Tt(t)),r=sn(Tt([o,...t])),s=(O?150:120)*kt(o),i=150*kt(r);Me(s>0?s+85:s,n*It(o),10,e),Ne(i<0?i-65:i,n*It(r))}function gt(t,e=!1){if(push(),e||on(.25))rotate(.75*TWO_PI*t),Ne(-y/6-25,-y/3-80),Me(y/6+35,-y/3-80,10);else{const e=t>0;Ne((5*y/12+(e?30:-35))*-t,B/3+15),Me(e?70:-5,B/3+20,10)}pop()}function Wt(){const t=h?{c1:-1,c2:185}:{holeR:135,c1:1,c2:-1,r1:15,r2:14,...Lt()};Gt(0,0,h?170:155,0,t);const e=en();N||e<.1?Ze(0,0,2.3):e<.8?Te(0,0,ROSETTE_STROKE_C,h?.5:.7):e<.92?_e(0,0,200):e<.98&&Ce(0,0,250)}function Mt(t){const e=int(en(3,11))*rn();Ut(210*t,20,40,0,zt({strokeC:c,strokeW:1,rDiff:2,ignoreShrink:!0,c1:e,c2:(e+5)*rn()}))}function Rt(t){Je(205*t,20,.65,LIGHT_ACCENT_C,LIGHT_ACCENT_C)}const Lt=()=>h?{}:{strokeC:ROSETTE_STROKE_C,innerC:E?ROSETTE_STROKE_C:n,outterC:ROSETTE_FILL_C};function At(){const t=!h&&on(.5),e=on(.25)?sn([1,2]):0,n=Lt();Gt(0,0,150,0,n),t?Gt(0,0,70,0,{...n,holeR:60}):e&&(Gt(0,0,110,0,0,n),e>1&&Gt(0,0,70,0,0,n)),(N||t||e<2||on(.9375))&&Ze(0,0,1)}function Nt(){const t=sn([1,2,3]),e=Lt();if(3===t){const t=qt(e);Gt(150,0,80,0,t),Gt(-150,0,80,0,t)}const n=qt(e);if(Gt(110,0,100,0,n),Gt(-110,0,100,0,n),t>1){const t=qt(e);Gt(60,0,130,0,t),Gt(-60,0,130,0,t)}Gt(0,0,150,0,qt(e)),Gt(0,0,70,0,{...qt(e),holeR:u?60:0}),Ze(0,0,.65)}function Pt(){const t=en(),e=Lt();if(t<.125){const t=qt(e);Gt(25,-120,25,0,t),Gt(25,120,25,0,t),Gt(-25,-120,25,0,t),Gt(-25,120,25,0,t)}if(t<.25){const t=qt(e);Gt(50,-90,45,0,t),Gt(50,90,45,0,t),Gt(-50,-90,45,0,t),Gt(-50,90,45,0,t)}if(t<.5){const t=qt(e);Gt(90,-50,70,0,t),Gt(90,50,70,0,t),Gt(-90,-50,70,0,t),Gt(-90,50,70,0,t)}const n=qt(e);Gt(130,0,90,0,n),Gt(-130,0,90,0,n),Ze(0,0,.65)}function wt(){const t=Lt();Gt(0,0,120,0,qt(t)),Gt(0,0,90,0,qt(t)),Gt(0,0,60,0,qt(t)),Qe(u,-142,2,.65,e),Qe(u,142,2,.65,e),Qe(u,-140,0,.65,e,o),Qe(u,140,0,.65,e,o)}function bt(){Zt(),vt(1,!0),vt(0,!0),vt(-1,!0),gt(rn(),!0)}function Ht(){Zt();const t=rn();on(.5)&&Ft(t),vt(t);const e=en(),n=y/-6*t;if(e<.65){const e=Lt();Gt(y/-6*t,0,180,0,e),(h||on(.3125))&&(Gt(y/-6*t,0,135,0,e),Gt(y/-6*t,0,90,0,e),h&&Gt(y/-6*t,0,70)),on(.1)&&_e(n,0,245)}else e<.9?(Te(n,0),(on(.1)||0===_)&&_e(n,0,245)):e<.97?_e(n,0,245):e<.99?Ze(n,0,3):Ce(y/-6*t,0,300);on(.5)&&xt(-1*t,1),on(.5)&&xt(-1*t,-1),gt(t)}function Ft(t=-1){push(),E&&stroke(i),line(y*t/6-1,20-B/2,y*t/6-1,B/2-20),line(y*t/6+1,20-B/2,y*t/6+1,B/2-20),pop()}function vt(t=-1,e=!1){if(on(.5)&&!e)Vt(B/3*(on(.5)?1:-1),t);else{const e=sn([1,2,3]);Vt(-B/3,t,1!=e),Vt(0,t,2!=e),Vt(B/3,t,3!=e)}}function Vt(t,e,n=!1){const o=y/3*e;Y&&!t&&!e||on(.15)&&n?Gt(o,t,55,0,Lt()):Ze(o,t,1.1)}function xt(t=1,e=1){push(),strokeCap(SQUARE);const n=y/2*t,o=-B/2*e;line(n-35*t,o+20*e,n-10*t,o+20*e),line(n-10*t,o+20*e,n-10*t,o+45*e),line(n-35*t,o+25*e,n-15*t,o+25*e),line(n-15*t,o+25*e,n-15*t,o+45*e),pop()}function Dt(){hn(25,()=>{let t=en(25,200);const e=en(Q,z),n=en(J,Z);Gt(e,n,t,on(.5)?0:en(t/5,t),{skipBg:on(.9)}),on(.5)&&Ze(e,n,t/120)})}function Gt(t,e,n,o=0,r={}){h&&(n*=.75),p&&(r={...r,fillC:ROSETTE_FILL_C,strokeMod:6});const s=h?Qt(r):zt(r);r.skipBg||(s.innerC?jt(t,e,n,o,s):("NUMISMATIC"===a?Xt:h?Bt:jt)(t,e,n,o,{...s,strokeC:ROSETTE_FILL_C,fillC:ROSETTE_FILL_C,strokeMod:6})),Kt()(t,e,n,r.holeR||o,{...s,strokeC:ROSETTE_STROKE_C,innerC:!1})};