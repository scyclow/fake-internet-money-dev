let t=parseInt(tokenData.hash.slice(50,58),16);function e(e,o){t^=t<<13,t^=t>>17;const n=((t^=t<<5)<0?1+~t:t)%1e3/1e3;return null!=o?e+n*(o-e):null!=e?n*e:n}function o(t){const e=tokenData.hash.slice(2+2*t,4+2*t);return parseInt(e,16)/255}const n=t=>e()<t,r=()=>n(.5)?1:-1,s=t=>t[int(e(t.length))],c=t=>(t+360)%360,i=()=>{};function l(t,e){beginShape(),curveVertex(...e(-1));for(let o=0;o<=t+1;o++)y&&rotate(.1),curveVertex(...e(o));endShape()}const f=(t,e,o=0,n=0)=>[sin(t)*e+o,cos(t)*e+n],u=(t,e,o=window)=>{o.beginShape(),o.curveVertex(...e(-1)),a(t+2,t=>{o.curveVertex(...Je(e(t),o))}),o.endShape()};function a(t,e){for(let o=0;o<t;o++)e(o)}let p,h,C,T,k,I,E,_,S,g,O,d,W,R,M,L,A,N,P,w,H,F,b,v,x,V,D,G,Y,K,X,j,U,m,y,B,$,q,Q,z,J,Z,tt,et,ot,nt,rt,st,ct,it,lt,ft,ut=1;const at=700,pt=400,ht=at/pt,Ct=4,Tt=-at/2,kt=at/2,It=-pt/2,Et=pt/2,_t={1:[Tt,It],2:[kt,It],3:[Tt,Et],4:[kt,Et]};let St,gt,Ot=!1,dt=!1;function setup(){const t=window.innerWidth/window.innerHeight;ht<t?(St=createCanvas(window.innerHeight*ht,window.innerHeight),p=window.innerHeight/pt):ht>t?(St=createCanvas(window.innerWidth,window.innerWidth/ht),p=window.innerWidth/at):(St=createCanvas(window.innerWidth,window.innerHeight),p=window.innerWidth/at);const e=(gt=createGraphics(at,pt)).pixelDensity()||2;gt.pixelDensity(e*Ct),noLoop(),colorMode(HSB,360,100,100,100),Wt()}function Wt(){const t=o(0);t<.5?d="1":t<.75?d="5":t<7/8?d="10":t<.9375?d="20":t<31/32?d="50":t<63/64?d="100":t<127/128&&(d="2"),P=n(.2);const r=o(1);COLOR_SCHEME=r<.65?"FIAT":r<.9?"CRYPTO":"BULLION",L="BULLION"===COLOR_SCHEME,IS_CRYPTO="CRYPTO"===COLOR_SCHEME;const s=(O=int(e(0,360)))<275&&O>210;"FIAT"===COLOR_SCHEME?(h=color(O,26,25),T=color(c(O-72),6,91),k=color(c(max(O-72,0)),6,91),C=color(O,16,55),_=color(c(O-145),80,64),LIGHT_ACCENT_C=color(c(O-145),55,64,30),I=color(max(O-10,0),80,54),E=I,U=n(.02)):IS_CRYPTO?(T=color(c(O-133),96,s?0:15),h=color(O,s?80:100,s?95:90),C=color(O,69,75),_=color(c(O-254),100,100),LIGHT_ACCENT_C=color(c(O-254),55,64,60),E=I=_,k=T,g=color(O,99,90,50)):(h=color(O,26,25),r<.96875?(T=color(203,5,48),I=color(167,5,95),h=color(40,26,20),C=color(203,10,35),E=C,lt=!0):(T=color(40,60,67),I=color(60,30,100),h=color(35,45,30),C=color(35,45,35),E=color(203,10,25)),_=h,LIGHT_ACCENT_C=C,k=T,N=!0),tt=n(.01),et=n(.01),ot=n(.015),rt=tt||et||ot,tt&&(T=color(c(O+30),96,95),h=color(O,s?80:100,80),C=color(O,69,75),_=color(c(O+40),100,75)),et&&(T=color(c(O-183),96,95),h=color(O,s?80:100,95),C=color(O,69,95),_=h),ot&&(T=color("#fff"),h=color("#000"),C=h,_=h),rt&&(LIGHT_ACCENT_C=_,E=I=_,k=T,LIGHT_ACCENT_C=C,g=h),ft=o(2)<.8125?"MAIN":o(2)<.95?"STRIP":"GRID",A="MAIN"===ft,Z=n(.01)&&A&&!j,MAIN_CENTER_PIECE=Ht(o(3)),F=A&&o(4)<.75,b=A&&n(F?.9:.6);const i=o(5);i<.0625?(W="DECO",M=!0):i<.6?W="NUMISMATIC":i<.8?(W="VINTAGE",R=!0):W=i<.86?"ECHO":i<.96?"DIGITAL":i<.9825?"LINE":"DENOMINATION",V=[0,1,3].includes(MAIN_CENTER_PIECE)&&"WM2"!==w&&o(7)<.25,D=V&&n(.4),G=V&&!D&&n(.2),Y=V&&o(7)<.0625,K=Y&&n(.4),X=Y&&!K&&n(.2);const l=n(.5)||L,f=lt?I:k,u=!N||M||R||L?h:E;ROSETTE_FILL_C=R||l?f:u,ROSETTE_STROKE_C=R||l?u:f,N=!R&&n(.125);const a=o(6);!A||F||a<.1875?(w="STANDARD",H=Se()):w=a<.5?"WM2":a<.8125?"WM1":R||M?n(.5)?"WM1":"WM2":a<.9375||IS_CRYPTO?"FULL":"EMPTY",j=!b&&8!==H&&!D&&!K,serialSeed=e(),ct=serialSeed<.005?0:serialSeed<.01?1:serialSeed<.015?2:serialSeed<.02?3:serialSeed<.025?4:serialSeed<.03?5:serialSeed<.035?6:"",x=o(8)<.015,m=n(.025),y=n(.02),Z=Z&&!j,$=n(.015),z=n(.015),B=n(.015),nt=n(.01),Q=n(.01),J=n(.005),MISPRINT_HEAVY_INK=n(.005),q=n(.005),IS_MISPRINT=m||y||Z||$||z||B||Q||J||MISPRINT_HEAVY_INK||q||rt||nt,it=!ct&&!x&&n(.05),MISPRINT_HEAVY_INK&&(ut=8),st=y||B||m,v=b||st?Ft():[]}function Rt(){push();const t=r(),o=e(0,100);L||strokeWeight(2);for(let e=-o;e<=at+o;e++){const n=1===t?e-at/2:at/2-e;stroke(lerpColor(T,U||L||N?I:h,U||L||IS_CRYPTO&&N?e/at:e/(5*at))),line(n+o,-pt/2,n,pt/2)}pop(),"FIAT"===COLOR_SCHEME&&Oe(),IS_CRYPTO&&"STANDARD"!==w&&de(),IS_CRYPTO||ge()}function draw(){const t=(d||0)*(it?-1:1)*(IS_MISPRINT?0:1)*(IS_CRYPTO?n(.5)?e(0,150):e(0,.1):1)*(lt?50:1)*(L&&!lt?100:1)*(x?3:1)*(ct?5:1)*(R||M?1.5:1);translate(width/2,height/2),scale(p),noFill(),stroke(h),Rt(),$&&At(),z&&Mt(),nt&&Lt(),strokeWeight(ut),A||J?wt():"STRIP"===ft?Zt():Jt(),Q&&Nt(),q&&Pt();try{console.log("Estimated Market Value: "+t)}catch(t){}}function keyPressed(){83===keyCode&&saveCanvas(St,"FIM-"+Date.now(),"jpg")}function Mt(){scale(-1)}function Lt(){(n(.5)?shearY:shearX)(PI*r()/e(4,10))}function At(){translate(e(at/4,pt/4)*r(),e(at/4,pt/4)*r()),rotate(e(HALF_PI,-HALF_PI))}function Nt(){push(),fill(T),strokeWeight(0),beginShape(),vertex(e(-at/2,at/2),-pt/2),vertex(e(-at/2,at/2),pt/2),vertex(e(-at/2,at/2),-pt/2),endShape(),pop()}function Pt(){strokeWeight(0);for(let t=0;t<=at;t++)for(let o=0;o<=pt;o++)fill(0,0,100,e(0,60)),rect(t-at/2,o-pt/2,2)}function wt(){let t=[],e=!1;if("STANDARD"===w)_e();else if("WM2"===w)Fe(t=Kt(v));else if("WM1"===w){const e=Yt(v);t=[e];const o=175*Vt(e),r=80*Dt(e,4===v.length),s=N?LIGHT_ACCENT_C:C;n(.8)?xe(o,r,s):Ye(o+15,r,245,s)}else"FULL"===w&&(be(),e=!0);switch(F&&eo(),bt(v),MAIN_CENTER_PIECE){case 0:break;case 1:$t();break;case 2:qt();break;case 3:Ut();break;case 4:Qt()}const o=r();V&&(D?yt(o):G?to(205*o):mt(o)),Y&&(K?yt(-1*o):X?to(-205*o):mt(-1*o)),J&&re(),Xt(t.length||4===v.length?t:v,e)}function Ht(t){if(A)return Z?0:t<.6875?1:t<.8125?2:t<.9375?3:4}function Ft(){const t=e();return t<.25?[1,2,3,4]:t<.5?[1,4]:t<.75?[2,3]:t<.825?[1,2]:t<.9375?[3,4]:[int(e(1,5))]}function bt(t=[]){push(),strokeWeight(.6*ut);const e=n(.125),o=4===t.length&&n(.5)?[s([1,3]),s([2,4])]:[],r=Te(Bt());t.forEach(t=>{const[n,s]=_t[t],c=n+(t%2==1?52:-52),i=s+(t<3?52:-52),l=e||o.includes(t)?37.5:0;se(c,i,50,0,{...r,holeR:l}),So(c,i,.3,ROSETTE_FILL_C,ROSETTE_STROKE_C)}),pop()}const vt=t=>[1,2,3,4].filter(e=>!t.includes(e)),xt=t=>({1:4,2:3,3:2,4:1})[t],Vt=t=>t%2!=0?-1:1,Dt=(t,e)=>e?0:t<3?-1:1,Gt=(t,e)=>t.every((t,o)=>t===e[o])&&t.length===e.length,Yt=t=>4!==t.length&&t.length?1===t.length?xt(t[0]):s(vt(t)):s([1,2,3,4]);function Kt(t){return 4!==t.length&&t.length?Gt(t,[1,4])||Gt(t,[2,3])?s([[1,4],[2,3]]):1===t.length?vt([t[0],xt(t[0])]):[xt(t[0]),xt(t[1])]:s([[1,4],[2,3],[1,2],[3,4]])}function Xt(t=[],e=!1){const o=115+(F?0:30),n=1===t.length?xt(t[0]):s(vt(t)),r=s(vt([n,...t])),c=(F?150:120)*Vt(n),i=150*Vt(r);ye(c>0?c+85:c,o*Dt(n),10,e),Qe(i<0?i-65:i,o*Dt(r))}function jt(t,e=!1){if(push(),e||n(.25))rotate(.75*TWO_PI*t),Qe(-at/6-25,-at/3-80),ye(at/6+35,-at/3-80,10);else{const e=t>0;Qe((5*at/12+(e?30:-35))*-t,pt/3+15),ye(e?70:-5,pt/3+20,10)}pop()}function Ut(){const t=R?{c1:-1,c2:185}:{holeR:135,c1:1,c2:-1,r1:15,r2:14,...Bt()};se(0,0,R?170:155,0,t);const o=e();j||o<.1?go(0,0,2.3):o<.8?xe(0,0,ROSETTE_STROKE_C,R?.5:.7):o<.92?Ye(0,0,200):o<.98&&ve(0,0,250)}function mt(t){const o=int(e(3,11))*r();ue(210*t,20,40,0,Ie({strokeC:_,strokeW:1,rDiff:2,ignoreShrink:!0,c1:o,c2:(o+5)*r()}))}function yt(t){So(205*t,20,.65,LIGHT_ACCENT_C,LIGHT_ACCENT_C)}const Bt=()=>R?{}:{strokeC:ROSETTE_STROKE_C,innerC:N?ROSETTE_STROKE_C:C,outterC:ROSETTE_FILL_C};function $t(){const t=!R&&n(.5),e=n(.25)?s([1,2]):0,o=Bt();se(0,0,150,0,o),t?se(0,0,70,0,{...o,holeR:60}):e&&(se(0,0,110,0,0,o),e>1&&se(0,0,70,0,0,o)),(j||t||e<2||n(.9375))&&go(0,0,1)}function qt(){const t=s([1,2,3]),e=Bt();if(3===t){const t=Te(e);se(150,0,80,0,t),se(-150,0,80,0,t)}const o=Te(e);if(se(110,0,100,0,o),se(-110,0,100,0,o),t>1){const t=Te(e);se(60,0,130,0,t),se(-60,0,130,0,t)}se(0,0,150,0,Te(e)),se(0,0,70,0,{...Te(e),holeR:d?60:0}),go(0,0,.65)}function Qt(){const t=e(),o=Bt();if(t<.125){const t=Te(o);se(25,-120,25,0,t),se(25,120,25,0,t),se(-25,-120,25,0,t),se(-25,120,25,0,t)}if(t<.25){const t=Te(o);se(50,-90,45,0,t),se(50,90,45,0,t),se(-50,-90,45,0,t),se(-50,90,45,0,t)}if(t<.5){const t=Te(o);se(90,-50,70,0,t),se(90,50,70,0,t),se(-90,-50,70,0,t),se(-90,50,70,0,t)}const n=Te(o);se(130,0,90,0,n),se(-130,0,90,0,n),go(0,0,.65)}function zt(){const t=Bt();se(0,0,120,0,Te(t)),se(0,0,90,0,Te(t)),se(0,0,60,0,Te(t)),Eo(d,-142,2,.65,h),Eo(d,142,2,.65,h),Eo(d,-140,0,.65,h,T),Eo(d,140,0,.65,h,T)}function Jt(){_e(),ee(1,!0),ee(0,!0),ee(-1,!0),jt(r(),!0)}function Zt(){_e();const t=r();n(.5)&&te(t),ee(t);const o=e(),s=at/-6*t;if(o<.65||st){const e=Bt();se(at/-6*t,0,180,0,e),(R||n(.3125))&&(se(at/-6*t,0,135,0,e),se(at/-6*t,0,90,0,e),R&&se(at/-6*t,0,70)),n(.1)&&Ye(s,0,245)}else o<.9?(xe(s,0),(n(.1)||0===H)&&Ye(s,0,245)):o<.97?Ye(s,0,245):o<.99?go(s,0,3):ve(at/-6*t,0,300);n(.5)&&ne(-1*t,1),n(.5)&&ne(-1*t,-1),jt(t)}function te(t=-1){push(),N&&stroke(E),line(at*t/6-1,20-pt/2,at*t/6-1,pt/2-20),line(at*t/6+1,20-pt/2,at*t/6+1,pt/2-20),pop()}function ee(t=-1,e=!1){if(n(.5)&&!e)oe(pt/3*(n(.5)?1:-1),t);else{const e=s([1,2,3]);oe(-pt/3,t,1!=e),oe(0,t,2!=e),oe(pt/3,t,3!=e)}}function oe(t,e,o=!1){const r=at/3*e;st&&!t&&!e||n(.15)&&o?se(r,t,55,0,Bt()):go(r,t,1.1)}function ne(t=1,e=1){push(),strokeCap(SQUARE);const o=at/2*t,n=-pt/2*e;line(o-35*t,n+20*e,o-10*t,n+20*e),line(o-10*t,n+20*e,o-10*t,n+45*e),line(o-35*t,n+25*e,o-15*t,n+25*e),line(o-15*t,n+25*e,o-15*t,n+45*e),pop()}function re(){a(25,()=>{let t=e(25,200);const o=e(Tt,kt),r=e(It,Et);se(o,r,t,n(.5)?0:e(t/5,t),{skipBg:n(.9)}),n(.5)&&go(o,r,t/120)})}function se(t,e,o,n=0,r={}){R&&(o*=.75),M&&(r={...r,fillC:ROSETTE_FILL_C,strokeMod:6});const s=R?ke(r):Ie(r);r.skipBg||(R?he:fe)(t,e,o,n,{...s,strokeC:ROSETTE_FILL_C,fillC:ROSETTE_FILL_C,strokeMod:6}),ce()(t,e,o,r.holeR||n,{...s,strokeC:ROSETTE_STROKE_C,innerC:!1})};
