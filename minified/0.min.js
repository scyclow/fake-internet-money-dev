let t=parseInt(tokenData.hash.slice(50,58),16);function e(e,o){t^=t<<13,t^=t>>17;const n=((t^=t<<5)<0?1+~t:t)%1e3/1e3;return null!=o?e+n*(o-e):null!=e?n*e:n}function o(t){const e=tokenData.hash.slice(2+2*t,4+2*t);return parseInt(e,16)/255}const n=t=>e()<t,r=()=>n(.5)?1:-1,s=t=>t[int(e(t.length))],c=t=>(t+360)%360,i=()=>{};function l(t,e){beginShape(),curveVertex(...e(-1));for(let o=0;o<=t+1;o++)y&&rotate(.1),curveVertex(...e(o));endShape()}const f=(t,e,o=0,n=0)=>[sin(t)*e+o,cos(t)*e+n],u=(t,e,o=window)=>{o.beginShape(),o.curveVertex(...e(-1)),a(t+2,t=>{o.curveVertex(...Ze(e(t),o))}),o.endShape()};function a(t,e){for(let o=0;o<t;o++)e(o)}let p,h,C,T,k,I,E,_,S,g,O,d,W,R,M,L,A,N,P,w,H,F,b,v,x,V,D,G,Y,K,X,j,U,m,y,B,$,q,Q,z,J,Z,tt,et,ot,nt,rt,st,ct,it,lt,ft,ut,at=1;const pt=700,ht=400,Ct=pt/ht,Tt=4,kt=-pt/2,It=pt/2,Et=-ht/2,_t=ht/2,St={1:[kt,Et],2:[It,Et],3:[kt,_t],4:[It,_t]};let gt,Ot,dt=!1,Wt=!1;function setup(){const t=window.innerWidth/window.innerHeight;Ct<t?(gt=createCanvas(window.innerHeight*Ct,window.innerHeight),p=window.innerHeight/ht):Ct>t?(gt=createCanvas(window.innerWidth,window.innerWidth/Ct),p=window.innerWidth/pt):(gt=createCanvas(window.innerWidth,window.innerHeight),p=window.innerWidth/pt);const e=(Ot=createGraphics(pt,ht)).pixelDensity()||2;Ot.pixelDensity(e*Tt),noLoop(),colorMode(HSB,360,100,100,100),Rt()}function Rt(){const t=o(0);t<.5?d="1":t<.75?d="5":t<7/8?d="10":t<.9375?d="20":t<31/32?d="50":t<63/64?d="100":t<127/128&&(d="2"),P=n(.2);const r=o(1);COLOR_SCHEME=r<.65?"FIAT":r<.9?"CRYPTO":"BULLION",L="BULLION"===COLOR_SCHEME,IS_CRYPTO="CRYPTO"===COLOR_SCHEME;const s=(O=int(e(0,360)))<275&&O>210;"FIAT"===COLOR_SCHEME?(h=color(O,26,25),T=color(c(O-72),6,91),k=color(c(max(O-72,0)),6,91),C=color(O,16,55),_=color(c(O-145),80,64),LIGHT_ACCENT_C=color(c(O-145),55,64,30),I=color(max(O-10,0),80,54),E=I,U=n(.02)):IS_CRYPTO?(T=color(c(O-133),96,s?0:15),h=color(O,s?80:100,s?95:90),C=color(O,69,75),_=color(c(O-254),100,100),LIGHT_ACCENT_C=_,E=I=_,k=T,g=color(O,99,90,50)):(h=color(O,26,25),r<.96875?(T=color(203,5,48),I=color(167,5,95),h=color(40,26,20),C=color(203,10,35),E=C,ft=!0):(T=color(40,60,67),I=color(60,30,100),h=color(35,45,30),C=color(35,45,35),E=color(203,10,25)),_=h,LIGHT_ACCENT_C=C,k=T,N=!0),et=n(.01),ot=n(.01),nt=n(.015),st=et||ot||nt,et&&(T=color(c(O+30),96,95),h=color(O,s?80:100,80),C=color(O,69,75),_=color(c(O+40),100,75)),ot&&(T=color(c(O-183),96,95),h=color(O,s?80:100,95),C=color(O,69,95),_=h),nt&&(T=color("#fff"),h=color("#000"),C=h,_=h),st&&(LIGHT_ACCENT_C=_,E=I=_,k=T,LIGHT_ACCENT_C=C,g=h),ut=o(2)<.8125?"MAIN":o(2)<.95?"STRIP":"GRID",A="MAIN"===ut,tt=n(.01)&&A&&!j,MAIN_CENTER_PIECE=Ft(o(3)),F=A&&o(4)<.75,b=A&&n(F?.9:.6);const i=o(5);i<.0625?(W="DECO",M=!0):i<.6?W="NUMISMATIC":i<.8?(W="VINTAGE",R=!0):W=i<.86?"ECHO":i<.96?"DIGITAL":i<.9825?"LINE":"DENOMINATION",V=[0,1,3].includes(MAIN_CENTER_PIECE)&&"WM2"!==w&&o(7)<.25,D=V&&n(.4),G=V&&!D&&n(.2),Y=V&&o(7)<.0625,K=Y&&n(.4),X=Y&&!K&&n(.2);const l=n(.5)||L,f=ft?I:k,u=!N||M||R||L?h:E;ROSETTE_FILL_C=R||l?f:u,ROSETTE_STROKE_C=R||l?u:f,N=!R&&n(.125);const a=o(6);!A||F||a<.1875?(w="STANDARD",H=ge()):w=a<.5?"WM2":a<.8125?"WM1":R||M?n(.5)?"WM1":"WM2":a<.9375||IS_CRYPTO?"FULL":"EMPTY",j=!b&&8!==H&&!D&&!K,serialSeed=e(),it=serialSeed<.005?0:serialSeed<.01?1:serialSeed<.015?2:serialSeed<.02?3:serialSeed<.025?4:serialSeed<.03?5:serialSeed<.035?6:"",x=o(8)<.015,m=n(.025),y=n(.02),tt=tt&&!j,$=n(.015),z=n(.015),B=n(.015),rt=n(.01),Q=n(.01),J=n(.005),MISPRINT_HEAVY_INK=n(.005),q=n(.005),IS_MISPRINT=m||y||tt||$||z||B||Q||J||MISPRINT_HEAVY_INK||q||st||rt,lt=!it&&!x&&n(.05),MISPRINT_HEAVY_INK&&(at=8),ct=y||B||m,v=b||ct?bt():[]}function Mt(){push();const t=r(),o=e(0,100);L||strokeWeight(2);for(let e=-o;e<=pt+o;e++){const n=1===t?e-pt/2:pt/2-e;stroke(lerpColor(T,U||L||N?I:h,U||L||IS_CRYPTO&&N?e/pt:e/(5*pt))),line(n+o,-ht/2,n,ht/2)}pop(),"FIAT"===COLOR_SCHEME&&de(),IS_CRYPTO&&"STANDARD"!==w&&We(),IS_CRYPTO||Oe()}function draw(){translate(width/2,height/2),scale(p),noFill(),stroke(h),Mt(),$&&Nt(),z&&Lt(),rt&&At(),strokeWeight(at),A||J?Ht():"STRIP"===ut?te():Zt(),Q&&Pt(),q&&wt();const t=(d||0)*(lt?-1:1)*(IS_MISPRINT?0:1)*(IS_CRYPTO?n(.5)?e(0,150):e(0,.1):1)*(ft?50:1)*(L&&!ft?100:1)*(x?3:1)*(it?5:1)*(R||M?1.5:1);try{console.log("Estimated Market Value: "+t)}catch(t){}}function keyPressed(){83===keyCode&&saveCanvas(gt,"FIM-"+Date.now(),"jpg")}function Lt(){scale(-1)}function At(){(n(.5)?shearY:shearX)(PI*r()/e(4,10))}function Nt(){translate(e(pt/4,ht/4)*r(),e(pt/4,ht/4)*r()),rotate(e(HALF_PI,-HALF_PI))}function Pt(){push(),fill(T),strokeWeight(0),beginShape(),vertex(e(-pt/2,pt/2),-ht/2),vertex(e(-pt/2,pt/2),ht/2),vertex(e(-pt/2,pt/2),-ht/2),endShape(),pop()}function wt(){strokeWeight(0);for(let t=0;t<=pt;t++)for(let o=0;o<=ht;o++)fill(0,0,100,e(0,60)),rect(t-pt/2,o-ht/2,2)}function Ht(){let t=[],e=!1;if("STANDARD"===w)Se();else if("WM2"===w)be(t=Xt(v));else if("WM1"===w){const e=Kt(v);t=[e];const o=175*Dt(e),r=80*Gt(e,4===v.length),s=N?LIGHT_ACCENT_C:C;n(.8)?Ve(o,r,s):Ke(o+15,r,245,s)}else"FULL"===w&&(ve(),e=!0);switch(F&&oo(),vt(v),MAIN_CENTER_PIECE){case 0:break;case 1:qt();break;case 2:Qt();break;case 3:mt();break;case 4:zt()}const o=r();V&&(D?Bt(o):G?eo(205*o):yt(o)),Y&&(K?Bt(-1*o):X?eo(-205*o):yt(-1*o)),J&&se(),jt(t.length||4===v.length?t:v,e)}function Ft(t){if(A)return tt?0:t<.6875?1:t<.8125?2:t<.9375?3:4}function bt(){const t=e();return t<.25?[1,2,3,4]:t<.5?[1,4]:t<.75?[2,3]:t<.825?[1,2]:t<.9375?[3,4]:[int(e(1,5))]}function vt(t=[]){push(),strokeWeight(.6*at);const e=n(.125),o=4===t.length&&n(.5)?[s([1,3]),s([2,4])]:[],r=ke($t());t.forEach(t=>{const[n,s]=St[t],c=n+(t%2==1?52:-52),i=s+(t<3?52:-52),l=e||o.includes(t)?37.5:0;ce(c,i,50,0,{...r,holeR:l}),go(c,i,.3,ROSETTE_FILL_C,ROSETTE_STROKE_C)}),pop()}const xt=t=>[1,2,3,4].filter(e=>!t.includes(e)),Vt=t=>({1:4,2:3,3:2,4:1})[t],Dt=t=>t%2!=0?-1:1,Gt=(t,e)=>e?0:t<3?-1:1,Yt=(t,e)=>t.every((t,o)=>t===e[o])&&t.length===e.length,Kt=t=>4!==t.length&&t.length?1===t.length?Vt(t[0]):s(xt(t)):s([1,2,3,4]);function Xt(t){return 4!==t.length&&t.length?Yt(t,[1,4])||Yt(t,[2,3])?s([[1,4],[2,3]]):1===t.length?xt([t[0],Vt(t[0])]):[Vt(t[0]),Vt(t[1])]:s([[1,4],[2,3],[1,2],[3,4]])}function jt(t=[],e=!1){const o=115+(F?0:30),n=1===t.length?Vt(t[0]):s(xt(t)),r=s(xt([n,...t])),c=(F?150:120)*Dt(n),i=150*Dt(r);Be(c>0?c+85:c,o*Gt(n),10,e),ze(i<0?i-65:i,o*Gt(r))}function Ut(t,e=!1){if(push(),e||n(.25))rotate(.75*TWO_PI*t),ze(-pt/6-25,-pt/3-80),Be(pt/6+35,-pt/3-80,10);else{const e=t>0;ze((5*pt/12+(e?30:-35))*-t,ht/3+15),Be(e?70:-5,ht/3+20,10)}pop()}function mt(){const t=R?{c1:-1,c2:185}:{holeR:135,c1:1,c2:-1,r1:15,r2:14,...$t()};ce(0,0,R?170:155,0,t);const o=e();j||o<.1?Oo(0,0,2.3):o<.8?Ve(0,0,ROSETTE_STROKE_C,R?.5:.7):o<.92?Ke(0,0,200):o<.98&&xe(0,0,250)}function yt(t){const o=int(e(3,11))*r();ae(210*t,20,40,0,Ee({strokeC:_,strokeW:1,rDiff:2,ignoreShrink:!0,c1:o,c2:(o+5)*r()}))}function Bt(t){go(205*t,20,.65,LIGHT_ACCENT_C,LIGHT_ACCENT_C)}const $t=()=>R?{}:{strokeC:ROSETTE_STROKE_C,innerC:N?ROSETTE_STROKE_C:C,outterC:ROSETTE_FILL_C};function qt(){const t=!R&&n(.5),e=n(.25)?s([1,2]):0,o=$t();ce(0,0,150,0,o),t?ce(0,0,70,0,{...o,holeR:60}):e&&(ce(0,0,110,0,0,o),e>1&&ce(0,0,70,0,0,o)),(j||t||e<2||n(.9375))&&Oo(0,0,1)}function Qt(){const t=s([1,2,3]),e=$t();if(3===t){const t=ke(e);ce(150,0,80,0,t),ce(-150,0,80,0,t)}const o=ke(e);if(ce(110,0,100,0,o),ce(-110,0,100,0,o),t>1){const t=ke(e);ce(60,0,130,0,t),ce(-60,0,130,0,t)}ce(0,0,150,0,ke(e)),ce(0,0,70,0,{...ke(e),holeR:d?60:0}),Oo(0,0,.65)}function zt(){const t=e(),o=$t();if(t<.125){const t=ke(o);ce(25,-120,25,0,t),ce(25,120,25,0,t),ce(-25,-120,25,0,t),ce(-25,120,25,0,t)}if(t<.25){const t=ke(o);ce(50,-90,45,0,t),ce(50,90,45,0,t),ce(-50,-90,45,0,t),ce(-50,90,45,0,t)}if(t<.5){const t=ke(o);ce(90,-50,70,0,t),ce(90,50,70,0,t),ce(-90,-50,70,0,t),ce(-90,50,70,0,t)}const n=ke(o);ce(130,0,90,0,n),ce(-130,0,90,0,n),Oo(0,0,.65)}function Jt(){const t=$t();ce(0,0,120,0,ke(t)),ce(0,0,90,0,ke(t)),ce(0,0,60,0,ke(t)),_o(d,-142,2,.65,h),_o(d,142,2,.65,h),_o(d,-140,0,.65,h,T),_o(d,140,0,.65,h,T)}function Zt(){Se(),oe(1,!0),oe(0,!0),oe(-1,!0),Ut(r(),!0)}function te(){Se();const t=r();n(.5)&&ee(t),oe(t);const o=e(),s=pt/-6*t;if(o<.65||ct){const e=$t();ce(pt/-6*t,0,180,0,e),(R||n(.3125))&&(ce(pt/-6*t,0,135,0,e),ce(pt/-6*t,0,90,0,e),R&&ce(pt/-6*t,0,70)),n(.1)&&Ke(s,0,245)}else o<.9?(Ve(s,0),(n(.1)||0===H)&&Ke(s,0,245)):o<.97?Ke(s,0,245):o<.99?Oo(s,0,3):xe(pt/-6*t,0,300);n(.5)&&re(-1*t,1),n(.5)&&re(-1*t,-1),Ut(t)}function ee(t=-1){push(),N&&stroke(E),line(pt*t/6-1,20-ht/2,pt*t/6-1,ht/2-20),line(pt*t/6+1,20-ht/2,pt*t/6+1,ht/2-20),pop()}function oe(t=-1,e=!1){if(n(.5)&&!e)ne(ht/3*(n(.5)?1:-1),t);else{const e=s([1,2,3]);ne(-ht/3,t,1!=e),ne(0,t,2!=e),ne(ht/3,t,3!=e)}}function ne(t,e,o=!1){const r=pt/3*e;ct&&!t&&!e||n(.15)&&o?ce(r,t,55,0,$t()):Oo(r,t,1.1)}function re(t=1,e=1){push(),strokeCap(SQUARE);const o=pt/2*t,n=-ht/2*e;line(o-35*t,n+20*e,o-10*t,n+20*e),line(o-10*t,n+20*e,o-10*t,n+45*e),line(o-35*t,n+25*e,o-15*t,n+25*e),line(o-15*t,n+25*e,o-15*t,n+45*e),pop()}function se(){a(25,()=>{let t=e(25,200);const o=e(kt,It),r=e(Et,_t);ce(o,r,t,n(.5)?0:e(t/5,t),{skipBg:n(.9)}),n(.5)&&Oo(o,r,t/120)})}function ce(t,e,o,n=0,r={}){R&&(o*=.75),M&&(r={...r,fillC:ROSETTE_FILL_C,strokeMod:6});const s=R?Ie(r):Ee(r);r.skipBg||(R?Ce:ue)(t,e,o,n,{...s,strokeC:ROSETTE_FILL_C,fillC:ROSETTE_FILL_C,strokeMod:6}),ie()(t,e,o,r.holeR||n,{...s,strokeC:ROSETTE_STROKE_C,innerC:!1})};
